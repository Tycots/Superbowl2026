# VoiSuperBowlWhaleMarket

**6 Methods | 8 Global State | 2 Box Storage | ARC-22, ARC-28**

## Contract Information

- **Compiler**: puya
- **Approval Program**: 20,032 bytes
- **Clear Program**: 184 bytes

## State Schema

### Global State
- **Bytes**: 0
- **Uints**: 8

### Local State
- **Bytes**: 0
- **Uints**: 0

## Global State Keys

| Key | Type | Description |
|-----|------|-------------|
| `total_sea_sold` | `AVMUint64` |  |
| `total_pat_sold` | `AVMUint64` |  |
| `is_resolved` | `AVMUint64` |  |
| `market_paused` | `AVMUint64` |  |
| `winner` | `AVMUint64` |  |
| `base_price` | `AVMUint64` |  |
| `skew_sensitivity` | `AVMUint64` |  |
| `max_bet_voi` | `AVMUint64` |  |

## Box Maps

| Name | Key Type | Value Type | Prefix | Description |
|------|----------|------------|--------|-------------|
| `balances_sea` | `address` | `uint64` | balances_sea |  |
| `balances_pat` | `address` | `uint64` | balances_pat |  |

## Methods

### `toggle_pause`

Admin emergency stop.

**Signature:** `toggle_pause()void`

**Returns:** `void`

---

### `get_price` *(read-only)*

Calculates current ticket price based on market skew.

**Signature:** `get_price(bool)uint64`

**Arguments:**

| Name | Type | Description |
|------|------|-------------|
| `want_sea` | `bool` |  |

**Returns:** `uint64`

---

### `buy_shares`

Allows users to buy tickets. Ensures house is always fully collateralized.

**Signature:** `buy_shares(pay,bool)void`

**Arguments:**

| Name | Type | Description |
|------|------|-------------|
| `payment` | `pay` |  |
| `want_sea` | `bool` |  |

**Returns:** `void`

---

### `resolve_market`

Admin calls this to settle the game. 1=SEA, 2=PAT.

**Signature:** `resolve_market(uint64)void`

**Arguments:**

| Name | Type | Description |
|------|------|-------------|
| `winner_code` | `uint64` |  |

**Returns:** `void`

---

### `withdraw_house_profit`

Creator withdraws the 'Spread' and any remaining seed principal.
Ensures winners can always be paid 1.00 VOI per share first.

**Signature:** `withdraw_house_profit()void`

**Returns:** `void`

---

### `claim_winnings`

Users call this after resolution to get their 1 VOI per share.

**Signature:** `claim_winnings()void`

**Returns:** `void`

---

## Bare Actions

**On Create:** NoOp


---

*Generated by [AVM Studio](https://avmstudio.com)*
